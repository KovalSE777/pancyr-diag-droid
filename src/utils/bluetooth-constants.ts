/**
 * Константы для Bluetooth протокола
 * 
 * ВАЖНО: Устройство НЕ использует UDS протокол!
 * Вместо этого используется ПРЯМОЕ УПРАВЛЕНИЕ через байты команд.
 */

// Тайминги и интервалы (в миллисекундах)
export const BT_TIMING = {
  // Пауза после подключения перед отправкой первой команды
  CONNECTION_STABILIZATION_DELAY: 200,
  
  // Интервал опроса состояния устройства (бывший PERIODIC_READ_INTERVAL)
  PERIODIC_READ_INTERVAL: 1000,
  
  // Интервал опроса данных в UI
  UI_POLLING_INTERVAL: 2000,
  
  // Задержка перед редиректом после успешного подключения
  REDIRECT_DELAY: 1200,
} as const;

// Адреса в протоколе прямого управления
export const PROTOCOL_ADDRESSES = {
  BSKU: 0x2A,          // Адрес БСКУ (получатель команд)
  TESTER: 0xF1,        // Адрес тестера/приложения (отправитель команд)
  EXPECTED_DST: 0xF1,  // Ожидаемый адрес назначения в ответах (тестер)
  EXPECTED_SRC: 0x2A,  // Ожидаемый адрес источника в ответах (БСКУ)
} as const;

/**
 * ФОРМАТ ПАКЕТА ПРЯМОГО УПРАВЛЕНИЯ:
 * [HDR, DST=0x2A, SRC=0xF1, iUPR_BT, iUPR_IND, iDAT_BIT, dlt_paus, CHK]
 * 
 * iUPR_BT (байт управления реле):
 *   bit 0: M1 (мотор 1)
 *   bit 1: M2 (мотор 2)
 *   bit 2: M3 (мотор 3)
 *   bit 3: M4 (мотор 4)
 *   bit 4: M5 (мотор 5)
 *   bit 5: CMP (компрессор)
 *   bit 6-7: зарезервировано
 * 
 * iUPR_IND (байт управления индикаторами):
 *   Используется для управления LED индикаторами
 * 
 * iDAT_BIT (байт флагов состояния):
 *   Битовые флаги для различных режимов работы
 * 
 * dlt_paus (задержка паузы):
 *   Значение 0-255 для управления таймингами
 * 
 * ОТВЕТ УСТРОЙСТВА:
 * [HDR, DST=0xF1, SRC=0x2A, 0x61, 0x01, ...22 байта телеметрии, CHK]
 */

// Устаревшие UDS константы (оставлены для совместимости, но НЕ используются)
export const UDS_ADDRESSES = PROTOCOL_ADDRESSES;

// Лимиты хранения данных
export const DATA_LIMITS = {
  MAX_HEX_FRAMES: 100,  // Максимальное количество hex-фреймов в памяти
  MAX_LOG_ENTRIES: 100, // Максимальное количество записей в логе
} as const;

// PIN-код для Bluetooth (из документации)
export const BT_DEFAULT_PIN = '1234';
