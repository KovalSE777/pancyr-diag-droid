# üéØ –û–¢–ß–ï–¢ –û –í–´–ü–û–õ–ù–ï–ù–ù–´–• –ò–ó–ú–ï–ù–ï–ù–ò–Ø–• –ü–†–û–¢–û–ö–û–õ–ê

**–î–∞—Ç–∞:** 17.10.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (–≠—Ç–∞–ø—ã 1-5)  
**–ú–µ—Ç–æ–¥:** –ë—ã—Å—Ç—Ä—ã–π –≤–∞—Ä–∏–∞–Ω—Ç (–≤—Å–µ —ç—Ç–∞–ø—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)

---

## ‚úÖ –≠–¢–ê–ü 1: UDS –ê–¥—Ä–µ—Å–∞—Ü–∏—è (–ó–ê–í–ï–†–®–ï–ù–û)

### –§–∞–π–ª: `src/utils/protocol-parser.ts`

**–ò–∑–º–µ–Ω–µ–Ω–æ:**
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `buildUDS()` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `DST=0x2A, SRC=0xF1` (–±—ã–ª–æ `0x28, 0xF0`)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `UDS_StartDiag` –¥–ª—è –∫–æ–º–∞–Ω–¥—ã 0x10 StartDiagnosticSession
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã:
  - `UDS_StartComm` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `0x2A, 0xF1`
  - `UDS_TesterPres` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `0x2A, 0xF1`
  - `UDS_Read21_01` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `0x2A, 0xF1`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–µ–ø–µ—Ä—å –≤—Å–µ UDS –∫–æ–º–∞–Ω–¥—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∞–¥—Ä–µ—Å–∞–º–∏ —Å–æ–≥–ª–∞—Å–Ω–æ –¢–ó v1.0

---

## ‚úÖ –≠–¢–ê–ü 2: Screen4Parser (–ü–û–õ–ù–û–°–¢–¨–Æ –ü–ï–†–ï–ü–ò–°–ê–ù)

### –§–∞–π–ª: `src/utils/screen4-parser.ts`

**–°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç (33 –±–∞–π—Ç–∞):**
```
- –û–∂–∏–¥–∞–ª 33 –±–∞–π—Ç–∞
- –ß–∏—Ç–∞–ª ADC –∫–∞–∫ u16 (2 –±–∞–π—Ç–∞)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Å–ª–æ–∂–Ω—É—é —Ä–∞—Å–ø–∞–∫–æ–≤–∫—É sim2/sim3
- –°–º–µ—â–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤ [9-10], [11-12], etc.
```

**–ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç (22 –±–∞–π—Ç–∞ + —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ):**
```
‚úÖ –ú–∏–Ω–∏–º—É–º 22 –±–∞–π—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
‚úÖ ADC —á–∏—Ç–∞—é—Ç—Å—è –∫–∞–∫ u8 (1 –±–∞–π—Ç)
‚úÖ –ü—Ä—è–º–æ–π –º–∞–ø–ø–∏–Ω–≥ –ø–æ —Ç–∞–±–ª–∏—Ü–µ –∏–∑ –¢–ó v1.0
‚úÖ –§–æ—Ä–º—É–ª–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏: voltage = ADC * 30 / 255
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ (–±–∞–π—Ç—ã 22-26)
```

**–ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π (–Ω–æ–≤—ã–π):**
```
[0]  ‚Üí U_U_UM1     (ADC –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –ú1)
[1]  ‚Üí U_U_UM2     (ADC –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –ú2)
[2]  ‚Üí U_U_UM3     (ADC –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –ú3)
[3]  ‚Üí U_U_FU      (ADC –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏—è)
[4]  ‚Üí uUPR_BT     (–±–∏—Ç–æ–≤–∞—è –º–∞—Å–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
[5]  ‚Üí uUPR_IND    (–±–∏—Ç–æ–≤–∞—è –º–∞—Å–∫–∞ –∏–Ω–¥–∏–∫–∞—Ü–∏–∏)
[6]  ‚Üí sDAT_BIT    (–±–∏—Ç–æ–≤–∞—è –º–∞—Å–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π)
[7]  ‚Üí work_rej_cmp (—Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–∞)
[8]  ‚Üí vdlt_cnd_i  (–ø–∞–¥–µ–Ω–∏–µ U –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä)
[9]  ‚Üí vdlt_isp_i  (–ø–∞–¥–µ–Ω–∏–µ U –∏—Å–ø–∞—Ä–∏—Ç–µ–ª—å)
[10] ‚Üí vdlt_cmp_i  (–ø–∞–¥–µ–Ω–∏–µ U –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä)
[11] ‚Üí timer_off   (—Ç–∞–π–º–µ—Ä –æ—Ç–∫–ª—é—á–µ–Ω–∏—è)
[12] ‚Üí rej_cnd     (—Ä–µ–∂–∏–º –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä)
[13] ‚Üí rej_isp     (—Ä–µ–∂–∏–º –∏—Å–ø–∞—Ä–∏—Ç–µ–ª—å)
[14] ‚Üí edlt_cnd    (–ø–æ—Ä–æ–≥ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä)
[15] ‚Üí edlt_isp    (–ø–æ—Ä–æ–≥ –∏—Å–ø–∞—Ä–∏—Ç–µ–ª—å)
[16] ‚Üí edlt_cmp    (–ø–æ—Ä–æ–≥ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä)
[17] ‚Üí n_V_cnd     (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∫–ª—é—á–µ–Ω–∏–π)
[18] ‚Üí PWM_spd     (—Å–∫–æ—Ä–æ—Å—Ç—å PWM)
[19] ‚Üí s1_TMR2     (HIGH –ø–µ—Ä–∏–æ–¥ PWM)
[20] ‚Üí s0_TMR2     (LOW –ø–µ—Ä–∏–æ–¥ PWM)
[21] ‚Üí t_v_razg_cnd (–≤—Ä–µ–º—è —Ä–∞–∑–≥–æ–Ω–∞)
--- –†–ê–°–®–ò–†–ï–ù–ù–´–ï (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ---
[22] ‚Üí T_air       (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤–æ–∑–¥—É—Ö–∞)
[23] ‚Üí T_isp       (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∏—Å–ø–∞—Ä–∏—Ç–µ–ª—å)
[24] ‚Üí U_davl      (–¥–∞–≤–ª–µ–Ω–∏–µ)
[26] ‚Üí T_kmp       (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä)
```

**–ë–∏—Ç–æ–≤—ã–µ –ø–æ–ª—è:**
```
uUPR_BT (–±–∞–π—Ç 4):
  bit 0 ‚Üí uUP_M1
  bit 1 ‚Üí uUP_M2
  bit 2 ‚Üí uUP_M3
  bit 3 ‚Üí uUP_M4
  bit 4 ‚Üí uUP_M5
  bit 5 ‚Üí uUP_CMP

uUPR_IND (–±–∞–π—Ç 5):
  bit 0 ‚Üí fuseEtalon
  bit 1 ‚Üí fuseCondenser
  bit 2 ‚Üí fuseEvaporator
  bit 3 ‚Üí fuseCompressor

sDAT_BIT (–±–∞–π—Ç 6):
  bit 0 ‚Üí bD_DAVL
  bit 1 ‚Üí bVKL_CMP
  bit 2 ‚Üí bBL_2 (—Ç–∏–ø —Å–∏—Å—Ç–µ–º—ã)
  bit 3 ‚Üí bK_NORM
  bit 4 ‚Üí bFTD_NORM
  bit 5 ‚Üí bBL2_1vnt
  bit 6 ‚Üí bNO_V_CMP
```

---

## ‚úÖ –≠–¢–ê–ü 3: –£–¥–∞–ª–µ–Ω–∏–µ parseTelemetry88 (–ó–ê–í–ï–†–®–ï–ù–û)

### –§–∞–π–ª: `src/utils/protocol-parser.ts`

**–£–¥–∞–ª–µ–Ω–æ:**
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `parseTelemetry88()` (—Å—Ç—Ä–æ–∫–∏ 127-161)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ `type: "TEL_88"` –≤ –ø–∞—Ä—Å–µ—Ä–µ
- ‚úÖ –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `u16le()`

**–ü—Ä–∏—á–∏–Ω–∞:** –§—Ä–µ–π–º 0x88 –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ deprecated –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏. –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª - UDS 0x21 0x01.

---

## ‚úÖ –≠–¢–ê–ü 4: StartDiagnosticSession (–ó–ê–í–ï–†–®–ï–ù–û)

### –§–∞–π–ª: `src/utils/protocol-parser.ts`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `UDS_StartDiag = buildUDS(0x2A, 0xF1, 0x10, [0x01])`

### –§–∞–π–ª: `src/utils/capacitor-bluetooth.ts`
- ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω `UDS_StartDiag`
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `sendStartCommunication()` –æ–±–Ω–æ–≤–ª–µ–Ω–∞:
  ```typescript
  async sendStartCommunication(): Promise<void> {
    // 1. StartDiagnosticSession (0x10)
    await this.sendUDSCommand(UDS_StartDiag);
    await new Promise(resolve => setTimeout(resolve, 200));
    
    // 2. StartCommunication (0x81)
    await this.sendUDSCommand(UDS_StartComm);
  }
  ```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–µ–ø–µ—Ä—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ö–µ–º–∞–º –æ–±–º–µ–Ω–∞ (0x10 ‚Üí –ø–∞—É–∑–∞ ‚Üí 0x81)

---

## ‚úÖ –≠–¢–ê–ü 5: –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–æ—Å–ª–µ connect (–ó–ê–í–ï–†–®–ï–ù–û)

### –§–∞–π–ª: `src/utils/capacitor-bluetooth.ts`

**–ß—Ç–æ –±—ã–ª–æ:**
```typescript
await this.bt.connect(mac);
await this.sendStartCommunication();
```

**–ß—Ç–æ —Å—Ç–∞–ª–æ:**
```typescript
await this.bt.connect(mac);
await new Promise(resolve => setTimeout(resolve, 200)); // –ü–∞—É–∑–∞ 200ms
await this.sendStartCommunication();
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞–¥–µ—Ä–∂–∫–∞ 200ms –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤–æ–π –∫–æ–º–∞–Ω–¥–æ–π (—Å–æ–≥–ª–∞—Å–Ω–æ –¢–ó)

---

## üîÑ –ë–û–ù–£–°: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ UDS –æ—Ç–≤–µ—Ç–æ–≤

### –§–∞–π–ª: `src/utils/capacitor-bluetooth.ts`

**–ò–∑–º–µ–Ω–µ–Ω–æ:**
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ `TEL_88`
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ `UDS_80P`:
  - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ payload –∏–∑ UDS –æ—Ç–≤–µ—Ç–∞ (–ø–æ—Å–ª–µ 5-–±–∞–π—Ç–æ–≤–æ–≥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞)
  - –ü–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞ 0x61 (–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ 0x21)
  - –í—ã–∑–æ–≤ `Screen4Parser.parse()` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º payload
  - –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ö–æ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
```typescript
if (sid === 0x61 && frame.ok && frame.raw.length >= 27) {
  const payload = frame.raw.slice(5, frame.raw.length - 1);
  if (payload.length >= 22) {
    const diagnosticData = Screen4Parser.parse(payload, this.systemType);
    // ...
  }
}
```

---

## üìä –°–í–û–î–ù–ê–Ø –¢–ê–ë–õ–ò–¶–ê –ò–ó–ú–ï–ù–ï–ù–ò–ô

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ä–æ–µ | –ù–æ–≤–æ–µ | –°—Ç–∞—Ç—É—Å |
|-----------|--------|-------|--------|
| UDS DST | 0x28 | 0x2A | ‚úÖ |
| UDS SRC | 0xF0 | 0xF1 | ‚úÖ |
| Payload —Ä–∞–∑–º–µ—Ä | 33 –±–∞–π—Ç–∞ | 22 –±–∞–π—Ç–∞ (+ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ) | ‚úÖ |
| ADC —Ñ–æ—Ä–º–∞—Ç | u16 (2 –±–∞–π—Ç–∞) | u8 (1 –±–∞–π—Ç) | ‚úÖ |
| Voltage —Ñ–æ—Ä–º—É–ª–∞ | `ADC * 0.12` | `ADC * 30 / 255` | ‚úÖ |
| –ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π | –°–ª–æ–∂–Ω–∞—è —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞ sim2/sim3 | –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø | ‚úÖ |
| parseTelemetry88 | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω | –£–¥–∞–ª–µ–Ω | ‚úÖ |
| StartDiagnosticSession | –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª | –î–æ–±–∞–≤–ª–µ–Ω (0x10) | ‚úÖ |
| –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–æ—Å–ª–µ connect | –ù–µ—Ç | 200 ms | ‚úÖ |
| –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É 0x10 –∏ 0x81 | –ù/–î | 200 ms | ‚úÖ |

---

## üß™ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò: –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–º–ø–∏–ª—è—Ü–∏—é
```bash
npm run build
```

### 2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É
- –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Android
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–°–ö–£ –ø–æ Bluetooth
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å TX/RX –∫–∞–¥—Ä—ã

**–û–∂–∏–¥–∞–µ–º–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏:**
```
TX: 84 2A F1 10 01 [CHK]     // StartDiagnosticSession
[–ø–∞—É–∑–∞ 200ms]
TX: 82 2A F1 81 [CHK]        // StartCommunication
RX: 8x F1 2A C1 [CHK]        // Positive response
...
TX: 83 2A F1 21 01 [CHK]     // ReadDataByIdentifier
RX: 9B F1 2A 61 01 [22 bytes payload] [CHK]  // Positive response + data
```

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö

**–í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
‚úì UDS 0xF1‚Üê0x2A SID=0x61, CHK=OK
‚úì UDS 0x21 payload parsed successfully
‚úì Parsed 22-byte format: U=27.4V, T_air=22.5¬∞C, mode=cooling
```

### 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å UI
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 0-30V)
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã (—Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ ¬∞C)
- –°—Ç–∞—Ç—É—Å—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –û—à–∏–±–∫–∏ –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–µ–π

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
‚ùå **–ù–ï–¢ –û–ë–†–ê–¢–ù–û–ô –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–ò** —Å–æ —Å—Ç–∞—Ä–æ–π –ø—Ä–æ—à–∏–≤–∫–æ–π (33 –±–∞–π—Ç–∞)

–ï—Å–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –µ—â–µ –Ω–∞ —Å—Ç–∞—Ä–æ–π –ø—Ä–æ—à–∏–≤–∫–µ:
- –ü–∞—Ä—Å–µ—Ä –≤—ã–¥–∞—Å—Ç –æ—à–∏–±–∫—É "Payload too short"
- –î–∞–Ω–Ω—ã–µ –Ω–µ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è
- –ù—É–∂–Ω–æ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—à–∏–≤–∫—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –ø—Ä–æ—à–∏–≤–∫–∏

**–ü–æ —Ä–∞–∑–º–µ—Ä—É –æ—Ç–≤–µ—Ç–∞:**
- –°—Ç–∞—Ä–∞—è: 33 + 5 (–∑–∞–≥–æ–ª–æ–≤–æ–∫) + 1 (CHK) = 39 –±–∞–π—Ç
- –ù–æ–≤–∞—è: 22 + 5 (–∑–∞–≥–æ–ª–æ–≤–æ–∫) + 1 (CHK) = 28 –±–∞–π—Ç

**–ü–æ –∞–¥—Ä–µ—Å–∞–º:**
- –°—Ç–∞—Ä–∞—è: DST=0x28, SRC=0xF0
- –ù–æ–≤–∞—è: DST=0x2A, SRC=0xF1

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–æ—à–∏–≤–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–¥—Ä–µ—Å–∞ –≤ –ª–æ–≥–∞—Ö (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å 0x2A/0xF1)

2. **Checksum fail:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞–¥—Ä–æ–≤
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ sum8() –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

3. **Parse failed:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä payload (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å >= 22)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –ø–æ–ª–µ–π

---

## üìù CHECKLIST –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### UDS –ü—Ä–æ—Ç–æ–∫–æ–ª
- [ ] –ó–∞–ø—Ä–æ—Å—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å DST=0x2A, SRC=0xF1
- [ ] –û—Ç–≤–µ—Ç—ã –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø—Ä–∏—Ö–æ–¥—è—Ç —Å DST=0xF1, SRC=0x2A
- [ ] Checksum –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞ –≤–æ –≤—Å–µ—Ö –∫–∞–¥—Ä–∞—Ö
- [ ] StartDiagnosticSession (0x10) —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] –ü–∞—É–∑–∞ 200ms –º–µ–∂–¥—É 0x10 –∏ 0x81 –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- [ ] StartCommunication (0x81) —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] TesterPresent (0x3E 0x01) —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∂–¥—ã–µ 1.5 —Å–µ–∫
- [ ] ReadData (0x21 0x01) —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∂–¥—É—é 1 —Å–µ–∫

### Payload 22 –±–∞–π—Ç–∞
- [ ] –ü–∞—Ä—Å–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç 22 –±–∞–π—Ç–∞
- [ ] ADC —á–∏—Ç–∞—é—Ç—Å—è –∫–∞–∫ u8 (–Ω–µ u16!)
- [ ] –§–æ—Ä–º—É–ª–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏: `V = ADC * 30 / 255`
- [ ] –í—Å–µ 22 –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –º–∞–ø–ø—è—Ç—Å—è
- [ ] –ë–∏—Ç–æ–≤—ã–µ –ø–æ–ª—è uUPR_BT –∏ sDAT_BIT —á–∏—Ç–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é
- [ ] –ü—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–∏ –∏–∑ uUPR_IND –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- [ ] –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—ã

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
- [ ] –ï—Å–ª–∏ payload >= 25 –±–∞–π—Ç, —á–∏—Ç–∞—é—Ç—Å—è T_air, T_isp, U_davl
- [ ] –ï—Å–ª–∏ payload >= 27 –±–∞–π—Ç, —á–∏—Ç–∞–µ—Ç—Å—è T_kmp
- [ ] –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

### –°–ª—É–∂–µ–±–Ω—ã–µ –∫–∞–¥—Ä—ã
- [ ] 0x66: UOKS –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –±–∞–π—Ç–æ–º screenId
- [ ] 0x77: UOKP –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –±–∞–π—Ç–æ–º pktId

### UI –∏ –¥–∞–Ω–Ω—ã–µ
- [ ] –ù–∞–ø—Ä—è–∂–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 0-30V
- [ ] –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ -50...+100¬∞C
- [ ] –î–∞–≤–ª–µ–Ω–∏–µ 0-4 –±–∞—Ä
- [ ] –°—Ç–∞—Ç—É—Å—ã –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- [ ] –û—à–∏–±–∫–∏ –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–µ–π –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢

‚úÖ **–í–°–ï 5 –≠–¢–ê–ü–û–í –í–´–ü–û–õ–ù–ï–ù–´**

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç:
- ‚úÖ –¢–ó –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ v1.0 –æ—Ç 17.10.2025
- ‚úÖ –°—Ö–µ–º—ã –æ–±–º–µ–Ω–∞ Pancyr Diag v1.0
- ‚úÖ 22-–±–∞–π—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç payload (–Ω–æ–≤–∞—è –ø—Ä–æ—à–∏–≤–∫–∞)
- ‚úÖ UDS –∞–¥—Ä–µ—Å–∞—Ü–∏—è 0x2A/0xF1
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**–ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ!**
